# Основные классы и методы
## SapperManager
Это основной класс в котором содержится логика игры "Сапёр".
В классе определены поля:
- content: используется для хранения игровой доски.
- `xScale`, `yScale`: используются для изменения размеров ячейки игровой доски.
- `xSize`, `ySize`: является количеством ячеек по осям игровой доски.
- `cage`: является отдельной ячейкой на игровой доске.
- `cages`: используется для хранения всех ячеек на игровой доске.
- `mines`, `flags`, `correctlyFlags`, `close`: Эти переменные используются для отслеживания состояния игры.
- `win`, `gameover`: используются для определения того, выиграл ли игрок или проиграл.
- `winObj`, `gameoverObj`: используются для отображения экранов "Вы выиграли" и "Игра окончена" соответственно.
- `ScreenPos`, `pos`: Объявляются приватные переменные типа Vector3 с именами "ScreenPos" и "pos".
- `fieldX`, `fieldY`, `fieldMines`: используются для получения ввода от пользователя относительно размера игровой доски и количества мин.
- `start`: используется для отслеживания времени начала игры.
- `timeText`, `leftMinesText`, `leftCloseCagesText`: используются для отображения времени, количества оставшихся мин и количества оставшихся закрытых ячеек соответственно.
- `mover`: используется для перемещения камеры в игре.
- `indent`: используется для установки отступа от края игровой доски.
Также в классе определены методы.
- Метод `CreateSapper()` вызывается при создании игровой доски.
- Метод `DestroySapper()` вызывается при уничтожении игровой доски.
- Метод `ParseX()`, `ParseY()`, `ParseMines()` вызываются при проверке строки на корректность вводимого значения.
- Метод `SearchMine()` осуществляет поиск мин вокруг клетки и возврат количества мин.
- Метод `OnGameOver()` вызывается при проигрыше.
## Cage
Класс `Cage` управляет поведением отдельной ячейки в игровой сетке. Каждая ячейка может содержать мины или быть пустой, а цель игрока состоит в том, чтобы открыть все пустые ячейки без взрыва мин.
Класс `Cage` содержит несколько открытых переменных и методов, которые используются для взаимодействия с другими частями игры. Переменная `misstake` является ссылкой на изображение UI, которое отображается, когда игрок щелкает по ячейке, содержащей мину. Массив `sprites` является массивом изображений, которые используются для отображения различных состояний ячейки: закрытой, помеченной флагом, пустой или содержащей неправильно поставленный флаг. Переменная `eventCage` является ссылкой на компонент UI изображения ячейки, который обновляется соответствующим спрайтом при щелчке по ячейке или пометке флагом.
Переменные `flag` и `open` являются логическими флагами, которые отслеживают, была ли ячейка помечена игроком или открыта, соответственно. Переменная `number` является целым числом, которое указывает количество мин в окружающих ячейках. Если `number` равно -1, то ячейка содержит мину. Переменные `x` и `y` являются целыми числами, которые определяют позицию ячейки в игровой сетке.
- Метод `OnChangeCountFlag()` вызывается, когда игрок щелкает по ячейке, чтобы переключить ее состояние флага. Если ячейка уже открыта или игра закончена, метод ничего не делает. Если ячейка не помечена флагом, метод проверяет, остались ли у игрока флаги для размещения, и обновляет спрайт `eventCage`, чтобы отобразить флаг. Если ячейка содержит мину, переменная `correctlyFlags` в компоненте `SapperManager` увеличивается. Если ячейка уже помечена флагом, метод обновляет спрайт `eventCage`, чтобы удалить флаг, и уменьшает переменную `correctlyFlags`, если ячейка содержит мину.
- Метод `OnClick()` вызывается, когда игрок щелкает по ячейке, чтобы раскрыть ее содержимое. Если ячейка уже помечена флагом или игра закончена, метод ничего не делает. Если ячейка содержит мину, отображается изображение `misstake` UI, и вызывается метод `OnGameOver` в компоненте `SapperManager`, чтобы завершить игру. Если ячейка не содержит мины, спрайт `eventCage` обновляется, чтобы отобразить соответствующее количество мин в окружающих ячейках или изображение "пустой ячейки", если вокруг нет мин. Если ячейка пустая, вызывается метод `OpenCagesAround`, чтобы рекурсивно раскрыть все пустые ячейки вокруг.
- Метод `OpenCagesAround()` является вспомогательным методом, который вызывается при открытии пустой ячейки, чтобы раскрыть все пустые ячейки вокруг. Он перебирает окружающие ячейки и, если они еще не открыты и не помечены флагом, вызывает их метод `OnClick`. Если ячейка, которую он проверяет, содержит мину, метод игнорирует ее и продолжает проверку следующей ячейки.
- Метод `Reset()` вызывается при начале новой игры, чтобы сбросить состояние ячейки. Он устанавливает переменные `flag` и `open` в значение false, обновляет спрайт `eventCage` для отображения закрытой ячейки, и устанавливает `number` в значение 0.
Класс `Cage` является важной частью игровой механики в игре "Сапер", и его методы и переменные используются для обработки взаимодействия игрока с ячейками в игровой сетке.
## CameraMover
Это скрипт для системы перемещения и масштабирования камеры. Скрипт прикрепляется к игровому объекту в сцене и изменяет позицию и ортографический размер главной камеры на основе действий пользователя.

Скрипт включает в себя следующие переменные и функции:
- `tr`: приватная ссылка на компонент Transform прикрепленного объекта.
- `cam`: приватная ссылка на компонент Camera главной камеры в сцене.
- `speed` и `zoom`: управляют скоростью перемещения и масштабирования камеры соответственно.
- `minCam` и `maxCam`: определяют минимальные и максимальные границы движения камеры в сцене.
- `min` и `max`: определяют минимальные и максимальные границы сцены.
- `rect`: используемый для позиционирования пользовательского интерфейса.
- Метод `Start()`: инициализирует позицию и ортографический размер камеры.
- Метод `CameraBorders()`: вычисляет минимальную и максимальную точки обзора камеры на основе ее ортографического размера и позиции.
- Метод `CameraPositionInsideBorders()`: вычисляет новую позицию камеры, которая соответствует определенным границам сцены.
- Метод `RectChangeY()`: корректирует привязку пользовательского интерфейса вертикально на основе позиции камеры.
- Метод `RectChangeX()`: корректирует привязку пользовательского интерфейса горизонтально на основе позиции камеры.
- Метод `OnChangeCameraPosition()`: обновляет позицию камеры и пользовательского интерфейса на основе границ сцены и обзора камеры.
- Метод `FixedUpdate()`: проверяет действия пользователя и соответствующим образом корректирует позицию и ортографический размер камеры. Функция `OnChangeCameraPosition()` вызывается в конце каждого обновления, чтобы гарантировать корректное обновление позиций камеры и пользовательского интерфейса.
